{"version":3,"file":"scrollbox.js","sources":["../node_modules/penner/penner.js","../src/scrollbox.js"],"sourcesContent":["\n/*\n\tCopyright Â© 2001 Robert Penner\n\tAll rights reserved.\n\n\tRedistribution and use in source and binary forms, with or without modification, \n\tare permitted provided that the following conditions are met:\n\n\tRedistributions of source code must retain the above copyright notice, this list of \n\tconditions and the following disclaimer.\n\tRedistributions in binary form must reproduce the above copyright notice, this list \n\tof conditions and the following disclaimer in the documentation and/or other materials \n\tprovided with the distribution.\n\n\tNeither the name of the author nor the names of contributors may be used to endorse \n\tor promote products derived from this software without specific prior written permission.\n\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n\tEXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n\tMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n\tCOPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\tEXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n\tGOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n\tAND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n\tNEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n\tOF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n(function() {\n  var penner, umd;\n\n  umd = function(factory) {\n    if (typeof exports === 'object') {\n      return module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else {\n      return this.penner = factory;\n    }\n  };\n\n  penner = {\n    linear: function(t, b, c, d) {\n      return c * t / d + b;\n    },\n    easeInQuad: function(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n    easeOutQuad: function(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n    easeInOutQuad: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t + b;\n      } else {\n        return -c / 2 * ((--t) * (t - 2) - 1) + b;\n      }\n    },\n    easeInCubic: function(t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n    easeOutCubic: function(t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t + 1) + b;\n    },\n    easeInOutCubic: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * t + 2) + b;\n      }\n    },\n    easeInQuart: function(t, b, c, d) {\n      return c * (t /= d) * t * t * t + b;\n    },\n    easeOutQuart: function(t, b, c, d) {\n      return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n    },\n    easeInOutQuart: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t * t + b;\n      } else {\n        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n      }\n    },\n    easeInQuint: function(t, b, c, d) {\n      return c * (t /= d) * t * t * t * t + b;\n    },\n    easeOutQuint: function(t, b, c, d) {\n      return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    easeInOutQuint: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return c / 2 * t * t * t * t * t + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n      }\n    },\n    easeInSine: function(t, b, c, d) {\n      return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n    },\n    easeOutSine: function(t, b, c, d) {\n      return c * Math.sin(t / d * (Math.PI / 2)) + b;\n    },\n    easeInOutSine: function(t, b, c, d) {\n      return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n    },\n    easeInExpo: function(t, b, c, d) {\n      if (t === 0) {\n        return b;\n      } else {\n        return c * Math.pow(2, 10 * (t / d - 1)) + b;\n      }\n    },\n    easeOutExpo: function(t, b, c, d) {\n      if (t === d) {\n        return b + c;\n      } else {\n        return c * (-Math.pow(2, -10 * t / d) + 1) + b;\n      }\n    },\n    easeInOutExpo: function(t, b, c, d) {\n      if (t === 0) {\n        b;\n      }\n      if (t === d) {\n        b + c;\n      }\n      if ((t /= d / 2) < 1) {\n        return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n      } else {\n        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n      }\n    },\n    easeInCirc: function(t, b, c, d) {\n      return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n    },\n    easeOutCirc: function(t, b, c, d) {\n      return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n    },\n    easeInOutCirc: function(t, b, c, d) {\n      if ((t /= d / 2) < 1) {\n        return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n      } else {\n        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n      }\n    },\n    easeInElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d) === 1) {\n        b + c;\n      }\n      if (!p) {\n        p = d * .3;\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    },\n    easeOutElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d) === 1) {\n        b + c;\n      }\n      if (!p) {\n        p = d * .3;\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n    },\n    easeInOutElastic: function(t, b, c, d) {\n      var a, p, s;\n      s = 1.70158;\n      p = 0;\n      a = c;\n      if (t === 0) {\n        b;\n      } else if ((t /= d / 2) === 2) {\n        b + c;\n      }\n      if (!p) {\n        p = d * (.3 * 1.5);\n      }\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n      if (t < 1) {\n        return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n      } else {\n        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;\n      }\n    },\n    easeInBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    easeOutBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    easeInOutBack: function(t, b, c, d, s) {\n      if (s === void 0) {\n        s = 1.70158;\n      }\n      if ((t /= d / 2) < 1) {\n        return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n      } else {\n        return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n      }\n    },\n    easeInBounce: function(t, b, c, d) {\n      var v;\n      v = penner.easeOutBounce(d - t, 0, c, d);\n      return c - v + b;\n    },\n    easeOutBounce: function(t, b, c, d) {\n      if ((t /= d) < 1 / 2.75) {\n        return c * (7.5625 * t * t) + b;\n      } else if (t < 2 / 2.75) {\n        return c * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + b;\n      } else if (t < 2.5 / 2.75) {\n        return c * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + b;\n      } else {\n        return c * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + b;\n      }\n    },\n    easeInOutBounce: function(t, b, c, d) {\n      var v;\n      if (t < d / 2) {\n        v = penner.easeInBounce(t * 2, 0, c, d);\n        return v * .5 + b;\n      } else {\n        v = penner.easeOutBounce(t * 2 - d, 0, c, d);\n        return v * .5 + c * .5 + b;\n      }\n    }\n  };\n\n  umd(penner);\n\n}).call(this);\n","import * as PIXI from 'pixi.js'\nimport { Viewport } from 'pixi-viewport'\nimport Penner from 'penner'\n\nconst scrollboxOptions = {\n    'boxWidth': 100,\n    'boxHeight': 100,\n    'scrollbarSize': 10,\n    'scrollbarBackground': 14540253,\n    'scrollbarBackgroundAlpha': 1,\n    'scrollbarForeground': 8947848,\n    'scrollbarForegroundAlpha': 1,\n    'dragScroll': true,\n    'stopPropagation': true,\n    'scrollbarOffsetHorizontal': 0,\n    'scrollbarOffsetVertical': 0,\n    'underflow': 'top-left',\n    'fadeScrollbar': false,\n    'fadeScrollbarTime': 1000,\n    'fadeScrollboxWait': 3000,\n    'fadeScrollboxEase': 'easeInOutSine',\n    'passiveWheel': false,\n    'clampWheel': true\n}\n\n/**\n * pixi.js scrollbox: a masked content box that can scroll vertically or horizontally with scrollbars\n */\nexport class Scrollbox extends PIXI.Container\n{\n    /**\n     * create a scrollbox\n     * @param {object} options\n     * @param {boolean} [options.dragScroll=true] user may drag the content area to scroll content\n     * @param {string} [options.overflowX=auto] (none, scroll, hidden, auto) this changes whether the scrollbar is shown\n     * @param {string} [options.overflowY=auto] (none, scroll, hidden, auto) this changes whether the scrollbar is shown\n     * @param {string} [options.overflow] (none, scroll, hidden, auto) sets overflowX and overflowY to this value\n     * @param {number} [options.boxWidth=100] width of scrollbox including scrollbar (in pixels)\n     * @param {number} [options.boxHeight=100] height of scrollbox including scrollbar (in pixels)\n     * @param {number} [options.scrollbarSize=10] size of scrollbar (in pixels)\n     * @param {number} [options.scrollbarOffsetHorizontal=0] offset of horizontal scrollbar (in pixels)\n     * @param {number} [options.scrollbarOffsetVertical=0] offset of vertical scrollbar (in pixels)\n     * @param {boolean} [options.stopPropagation=true] call stopPropagation on any events that impact scrollbox\n     * @param {number} [options.scrollbarBackground=0xdddddd] background color of scrollbar\n     * @param {number} [options.scrollbarBackgroundAlpha=1] alpha of background of scrollbar\n     * @param {number} [options.scrollbarForeground=0x888888] foreground color of scrollbar\n     * @param {number} [options.scrollbarForegroundAlpha=1] alpha of foreground of scrollbar\n     * @param {string} [options.underflow=top-left] what to do when content underflows the scrollbox size: none: do nothing; (left/right/center AND top/bottom/center); OR center (e.g., 'top-left', 'center', 'none', 'bottomright')\n     * @param {boolean} [options.noTicker] do not use PIXI.Ticker (for fade to work properly you will need to manually call updateLoop(elapsed) on each frame)\n     * @param {PIXI.Ticker} [options.ticker=PIXI.Ticker.shared] use this PIXI.Ticker for updates\n     * @param {boolean} [options.fade] fade the scrollbar when not in use\n     * @param {number} [options.fadeScrollbarTime=1000] time to fade scrollbar if options.fade is set\n     * @param {number} [options.fadeScrollboxWait=3000] time to wait before fading the scrollbar if options.fade is set\n     * @param {(string|function)} [options.fadeScrollboxEase=easeInOutSine] easing function to use for fading\n     * @param {boolean} [options.passiveWheel=false] whether wheel events are propogated beyond the scrollbox (NOTE: default is now false)\n     * @param {boolean} [options.clampWheel=true] wheel events should be clamped (to avoid weird bounce with mouse wheel)\n     */\n    constructor(options={})\n    {\n        super()\n        this.options = Object.assign({}, scrollboxOptions, options)\n        if (options.overflow) {\n            this.options.overflowX = this.options.overflowY = options.overflow\n        }\n        this.ease = typeof this.options.fadeScrollboxEase === 'function' ? this.options.fadeScrollboxEase : Penner[this.options.fadeScrollboxEase]\n\n        /**\n         * content in placed in here\n         * you can use any function from pixi-viewport on content to manually move the content (see https://davidfig.github.io/pixi-viewport/jsdoc/)\n         * @type {Viewport}\n         */\n        this.content = this.addChild(new Viewport({ passiveWheel: this.options.passiveWheel, stopPropagation: this.options.stopPropagation, screenWidth: this.options.boxWidth, screenHeight: this.options.boxHeight }))\n        this.content\n            .decelerate()\n            .on('moved', () => this._drawScrollbars())\n\n        // needed to pull this out of viewportOptions because of pixi.js v4 support (which changed from PIXI.ticker.shared to PIXI.Ticker.shared...sigh)\n        if (options.ticker)\n        {\n            this.options.ticker = options.ticker\n        }\n        else\n        {\n            // to avoid Rollup transforming our import, save pixi namespace in a variable\n            // from here: https://github.com/pixijs/pixi.js/issues/5757\n            let ticker\n            const pixiNS = PIXI\n            if (parseInt(/^(\\d+)\\./.exec(PIXI.VERSION)[1]) < 5)\n            {\n                ticker = pixiNS.ticker.shared;\n            }\n            else\n            {\n                ticker = pixiNS.Ticker.shared;\n            }\n            this.options.ticker = options.ticker || ticker\n        }\n\n        /**\n         * graphics element for drawing the scrollbars\n         * @type {PIXI.Graphics}\n         */\n        this.scrollbar = this.addChild(new PIXI.Graphics())\n        this.scrollbar.interactive = true\n        this.scrollbar.on('pointerdown', this.scrollbarDown, this)\n        this.interactive = true\n        this.on('pointermove', this.scrollbarMove, this)\n        this.on('pointerup', this.scrollbarUp, this)\n        this.on('pointercancel', this.scrollbarUp, this)\n        this.on('pointerupoutside', this.scrollbarUp, this)\n        this._maskContent = this.addChild(new PIXI.Graphics())\n        this.update()\n\n        if (!this.options.noTicker)\n        {\n            this.tickerFunction = () => this.updateLoop(Math.min(this.options.ticker.elapsedMS, 16.6667))\n            this.options.ticker.add(this.tickerFunction)\n        }\n    }\n\n    /**\n     * offset of horizontal scrollbar (in pixels)\n     * @type {number}\n     */\n    get scrollbarOffsetHorizontal()\n    {\n        return this.options.scrollbarOffsetHorizontal\n    }\n    set scrollbarOffsetHorizontal(value)\n    {\n        this.options.scrollbarOffsetHorizontal = value\n    }\n\n    /**\n     * offset of vertical scrollbar (in pixels)\n     * @type {number}\n     */\n    get scrollbarOffsetVertical()\n    {\n        return this.options.scrollbarOffsetVertical\n    }\n    set scrollbarOffsetVertical(value)\n    {\n        this.options.scrollbarOffsetVertical = value\n    }\n\n    /**\n     * disable the scrollbox (if set to true this will also remove the mask)\n     * @type {boolean}\n     */\n    get disable()\n    {\n        return this._disabled\n    }\n    set disable(value)\n    {\n        if (this._disabled !== value)\n        {\n            this._disabled = value\n            this.update()\n        }\n    }\n\n    /**\n     * call stopPropagation on any events that impact scrollbox\n     * @type {boolean}\n     */\n    get stopPropagation()\n    {\n        return this.options.stopPropagation\n    }\n    set stopPropagation(value)\n    {\n        this.options.stopPropagation = value\n    }\n\n    /**\n     * user may drag the content area to scroll content\n     * @type {boolean}\n     */\n    get dragScroll()\n    {\n        return this.options.dragScroll\n    }\n    set dragScroll(value)\n    {\n        this.options.dragScroll = value\n        if (value)\n        {\n            this.content.drag()\n        }\n        else\n        {\n            if (typeof this.content.removePlugin !== 'undefined')\n            {\n                this.content.removePlugin('drag')\n            }\n            else\n            {\n                this.content.plugins.remove('drag')\n            }\n        }\n        this.update()\n    }\n\n    /**\n     * width of scrollbox including the scrollbar (if visible)- this changes the size and not the scale of the box\n     * @type {number}\n     */\n    get boxWidth()\n    {\n        return this.options.boxWidth\n    }\n    set boxWidth(value)\n    {\n        this.options.boxWidth = value\n        this.content.screenWidth = value\n        this.update()\n    }\n\n    /**\n     * sets overflowX and overflowY to (scroll, hidden, auto) changing whether the scrollbar is shown\n     * scroll = always show scrollbar\n     * hidden = hide overflow and do not show scrollbar\n     * auto = if content is larger than box size, then show scrollbar\n     * @type {string}\n     */\n    get overflow()\n    {\n        return this.options.overflow\n    }\n    set overflow(value)\n    {\n        this.options.overflow = value\n        this.options.overflowX = value\n        this.options.overflowY = value\n        this.update()\n    }\n\n    /**\n     * sets overflowX to (scroll, hidden, auto) changing whether the scrollbar is shown\n     * scroll = always show scrollbar\n     * hidden = hide overflow and do not show scrollbar\n     * auto = if content is larger than box size, then show scrollbar\n     * @type {string}\n     */\n    get overflowX()\n    {\n        return this.options.overflowX\n    }\n    set overflowX(value)\n    {\n        this.options.overflowX = value\n        this.update()\n    }\n\n    /**\n     * sets overflowY to (scroll, hidden, auto) changing whether the scrollbar is shown\n     * scroll = always show scrollbar\n     * hidden = hide overflow and do not show scrollbar\n     * auto = if content is larger than box size, then show scrollbar\n     * @type {string}\n     */\n    get overflowY()\n    {\n        return this.options.overflowY\n    }\n    set overflowY(value)\n    {\n        this.options.overflowY = value\n        this.update()\n    }\n\n    /**\n     * height of scrollbox including the scrollbar (if visible) - this changes the size and not the scale of the box\n     * @type {number}\n     */\n    get boxHeight()\n    {\n        return this.options.boxHeight\n    }\n    set boxHeight(value)\n    {\n        this.options.boxHeight = value\n        this.content.screenHeight = value\n        this.update()\n    }\n\n    /**\n     * scrollbar size in pixels\n     * @type {number}\n     */\n    get scrollbarSize()\n    {\n        return this.options.scrollbarSize\n    }\n    set scrollbarSize(value)\n    {\n        this.options.scrollbarSize = value\n    }\n\n    /**\n     * width of scrollbox less the scrollbar (if visible)\n     * @type {number}\n     * @readonly\n     */\n    get contentWidth()\n    {\n        return this.options.boxWidth - (this.isScrollbarVertical ? this.options.scrollbarSize : 0)\n    }\n\n    /**\n     * height of scrollbox less the scrollbar (if visible)\n     * @type {number}\n     * @readonly\n     */\n    get contentHeight()\n    {\n        return this.options.boxHeight - (this.isScrollbarHorizontal ? this.options.scrollbarSize : 0)\n    }\n\n    /**\n     * is the vertical scrollbar visible\n     * @type {boolean}\n     * @readonly\n     */\n    get isScrollbarVertical()\n    {\n        return this._isScrollbarVertical\n    }\n\n    /**\n     * is the horizontal scrollbar visible\n     * @type {boolean}\n     * @readonly\n     */\n    get isScrollbarHorizontal()\n    {\n        return this._isScrollbarHorizontal\n    }\n\n    /**\n     * top coordinate of scrollbar\n     */\n    get scrollTop()\n    {\n        return this.content.top\n    }\n    set scrollTop(top) {\n        this.content.top = top\n        this._drawScrollbars()\n    }\n\n    /**\n     * left coordinate of scrollbar\n     */\n    get scrollLeft()\n    {\n        return this.content.left\n    }\n    set scrollLeft(left) {\n        this.content.left = left\n        this._drawScrollbars()\n    }\n\n    /**\n     * width of content area\n     * if not set then it uses content.width to calculate width\n     */\n    get scrollWidth()\n    {\n        return this._scrollWidth || this.content.width\n    }\n    set scrollWidth(value)\n    {\n        this._scrollWidth = value\n    }\n\n    /**\n     * height of content area\n     * if not set then it uses content.height to calculate height\n     */\n    get scrollHeight()\n    {\n        return this._scrollHeight || this.content.height\n    }\n    set scrollHeight(value)\n    {\n        this._scrollHeight = value\n    }\n\n    /**\n     * draws scrollbars\n     * @private\n     */\n    _drawScrollbars()\n    {\n        this._isScrollbarHorizontal = this.overflowX === 'scroll' ? true : ['hidden', 'none'].indexOf(this.overflowX) !== -1 ? false : this.scrollWidth > this.options.boxWidth\n        this._isScrollbarVertical = this.overflowY === 'scroll' ? true : ['hidden', 'none'].indexOf(this.overflowY) !== -1 ? false : this.scrollHeight > this.options.boxHeight\n        this.scrollbar.clear()\n        let options = {}\n        options.left = 0\n        options.right = this.scrollWidth + (this._isScrollbarVertical ? this.options.scrollbarSize : 0)\n        options.top = 0\n        options.bottom = this.scrollHeight + (this.isScrollbarHorizontal ? this.options.scrollbarSize : 0)\n        const width = this.scrollWidth + (this.isScrollbarVertical ? this.options.scrollbarSize : 0)\n        const height = this.scrollHeight + (this.isScrollbarHorizontal ? this.options.scrollbarSize : 0)\n        this.scrollbarTop = (this.content.top / height) * this.boxHeight\n        this.scrollbarTop = this.scrollbarTop < 0 ? 0 : this.scrollbarTop\n        this.scrollbarHeight = (this.boxHeight / height) * this.boxHeight\n        this.scrollbarHeight = this.scrollbarTop + this.scrollbarHeight > this.boxHeight ? this.boxHeight - this.scrollbarTop : this.scrollbarHeight\n        this.scrollbarLeft = (this.content.left / width) * this.boxWidth\n        this.scrollbarLeft = this.scrollbarLeft < 0 ? 0 : this.scrollbarLeft\n        this.scrollbarWidth = (this.boxWidth / width) * this.boxWidth\n        this.scrollbarWidth = this.scrollbarWidth + this.scrollbarLeft > this.boxWidth ? this.boxWidth - this.scrollbarLeft : this.scrollbarWidth\n        if (this.isScrollbarVertical)\n        {\n            this.scrollbar\n                .beginFill(this.options.scrollbarBackground, this.options.scrollbarBackgroundAlpha)\n                .drawRect(this.boxWidth - this.scrollbarSize + this.options.scrollbarOffsetVertical, 0, this.scrollbarSize, this.boxHeight)\n                .endFill()\n        }\n        if (this.isScrollbarHorizontal)\n        {\n            this.scrollbar\n                .beginFill(this.options.scrollbarBackground, this.options.scrollbarBackgroundAlpha)\n                .drawRect(0, this.boxHeight - this.scrollbarSize + this.options.scrollbarOffsetHorizontal, this.boxWidth, this.scrollbarSize)\n                .endFill()\n        }\n        if (this.isScrollbarVertical)\n        {\n            this.scrollbar\n                .beginFill(this.options.scrollbarForeground, this.options.scrollbarForegroundAlpha)\n                .drawRect(this.boxWidth - this.scrollbarSize + this.options.scrollbarOffsetVertical, this.scrollbarTop, this.scrollbarSize, this.scrollbarHeight)\n                .endFill()\n        }\n        if (this.isScrollbarHorizontal)\n        {\n            this.scrollbar\n                .beginFill(this.options.scrollbarForeground, this.options.scrollbarForegroundAlpha)\n                .drawRect(this.scrollbarLeft, this.boxHeight - this.scrollbarSize + this.options.scrollbarOffsetHorizontal, this.scrollbarWidth, this.scrollbarSize)\n                .endFill()\n        }\n        // this.content.forceHitArea = new PIXI.Rectangle(0, 0 , this.boxWidth, this.boxHeight)\n        this.activateFade()\n    }\n\n    /**\n     * draws mask layer\n     * @private\n     */\n    _drawMask()\n    {\n        this._maskContent\n            .beginFill(0)\n            .drawRect(0, 0, this.boxWidth, this.boxHeight)\n            .endFill()\n        this.content.mask = this._maskContent\n    }\n\n    /**\n     * call when scrollbox content changes\n     */\n    update()\n    {\n        this.content.mask = null\n        this._maskContent.clear()\n        if (!this._disabled)\n        {\n            this._drawScrollbars()\n            this._drawMask()\n            const direction = this.isScrollbarHorizontal && this.isScrollbarVertical ? 'all' : this.isScrollbarHorizontal ? 'x' : 'y'\n            if (direction !== null) {\n                if (this.options.dragScroll)\n                {\n                    this.content.drag({ clampWheel: this.options.clampWheel, direction })\n                }\n                this.content.clamp({ direction, underflow: this.options.underflow })\n            }\n        }\n    }\n\n    /**\n     * called on each frame to update fade scrollbars (if enabled)\n     * @param {number} elapsed since last frame in milliseconds (usually capped at 16.6667)\n     */\n    updateLoop(elapsed)\n    {\n        if (this.fade)\n        {\n            if (this.fade.wait > 0)\n            {\n                this.fade.wait -= elapsed\n                if (this.fade.wait <= 0)\n                {\n                    elapsed += this.fade.wait\n                }\n                else\n                {\n                    return\n                }\n            }\n            this.fade.duration += elapsed\n            if (this.fade.duration >= this.options.fadeScrollbarTime)\n            {\n                this.fade = null\n                this.scrollbar.alpha = 0\n            }\n            else\n            {\n                this.scrollbar.alpha = this.ease(this.fade.duration, 1, -1, this.options.fadeScrollbarTime)\n            }\n            this.content.dirty = true\n        }\n    }\n\n    /**\n     * dirty value (used for optimizing draws) for underlying viewport (scrollbox.content)\n     * @type {boolean}\n     */\n    get dirty()\n    {\n        return this.content.dirty\n    }\n    set dirty(value)\n    {\n        this.content.dirty = value\n    }\n\n    /**\n     * show the scrollbar and restart the timer for fade if options.fade is set\n     */\n    activateFade()\n    {\n        if (!this.fade && this.options.fade)\n        {\n            this.scrollbar.alpha = 1\n            this.fade = { wait: this.options.fadeScrollboxWait, duration: 0 }\n        }\n    }\n\n    /**\n     * handle pointer down on scrollbar\n     * @param {PIXI.interaction.InteractionEvent} e\n     * @private\n     */\n    scrollbarDown(e)\n    {\n        const local = this.toLocal(e.data.global)\n        if (this.isScrollbarHorizontal)\n        {\n            if (local.y > this.boxHeight - this.scrollbarSize)\n            {\n                if (local.x >= this.scrollbarLeft && local.x <= this.scrollbarLeft + this.scrollbarWidth)\n                {\n                    this.pointerDown = { type: 'horizontal', last: local }\n                }\n                else\n                {\n                    if (local.x > this.scrollbarLeft)\n                    {\n                        this.content.left += this.content.worldScreenWidth\n                        this.update()\n                    }\n                    else\n                    {\n                        this.content.left -= this.content.worldScreenWidth\n                        this.update()\n                    }\n                }\n                if (this.options.stopPropagation)\n                {\n                    e.stopPropagation()\n                }\n                return\n            }\n        }\n        if (this.isScrollbarVertical)\n        {\n            if (local.x > this.boxWidth - this.scrollbarSize)\n            {\n                if (local.y >= this.scrollbarTop && local.y <= this.scrollbarTop + this.scrollbarWidth)\n                {\n                    this.pointerDown = { type: 'vertical', last: local }\n                }\n                else\n                {\n                    if (local.y > this.scrollbarTop)\n                    {\n                        this.content.top += this.content.worldScreenHeight\n                        this.update()\n                    }\n                    else\n                    {\n                        this.content.top -= this.content.worldScreenHeight\n                        this.update()\n                    }\n                }\n                if (this.options.stopPropagation)\n                {\n                    e.stopPropagation()\n                }\n                return\n            }\n        }\n    }\n\n    /**\n     * handle pointer move on scrollbar\n     * @param {PIXI.interaction.InteractionEvent} e\n     * @private\n     */\n    scrollbarMove(e)\n    {\n        if (this.pointerDown)\n        {\n            if (this.pointerDown.type === 'horizontal')\n            {\n                const local = this.toLocal(e.data.global)\n                const width = this.scrollWidth + (this.isScrollbarVertical ? this.options.scrollbarSize : 0)\n                this.scrollbarLeft += local.x - this.pointerDown.last.x\n                this.content.left = this.scrollbarLeft / this.boxWidth * width\n                this.pointerDown.last = local\n                this.update()\n            }\n            else if (this.pointerDown.type === 'vertical')\n            {\n                const local = this.toLocal(e.data.global)\n                const height = this.scrollHeight + (this.isScrollbarHorizontal ? this.options.scrollbarSize : 0)\n                this.scrollbarTop += local.y - this.pointerDown.last.y\n                this.content.top = this.scrollbarTop / this.boxHeight * height\n                this.pointerDown.last = local\n                this.update()\n            }\n            if (this.options.stopPropagation)\n            {\n                e.stopPropagation()\n            }\n        }\n    }\n\n    /**\n     * handle pointer down on scrollbar\n     * @private\n     */\n    scrollbarUp()\n    {\n        this.pointerDown = null\n    }\n\n    /**\n     * resize the mask for the container\n     * @param {object} options\n     * @param {number} [options.boxWidth] width of scrollbox including scrollbar (in pixels)\n     * @param {number} [options.boxHeight] height of scrollbox including scrollbar (in pixels)\n     * @param {number} [options.scrollWidth] set the width of the inside of the scrollbox (leave null to use content.width)\n     * @param {number} [options.scrollHeight] set the height of the inside of the scrollbox (leave null to use content.height)\n     */\n    resize(options)\n    {\n        this.options.boxWidth = typeof options.boxWidth !== 'undefined' ? options.boxWidth : this.options.boxWidth\n        this.options.boxHeight = typeof options.boxHeight !== 'undefined' ? options.boxHeight : this.options.boxHeight\n        if (options.scrollWidth)\n        {\n            this.scrollWidth = options.scrollWidth\n        }\n        if (options.scrollHeight)\n        {\n            this.scrollHeight = options.scrollHeight\n        }\n        this.content.resize(this.options.boxWidth, this.options.boxHeight, this.scrollWidth, this.scrollHeight)\n        this.update()\n    }\n\n    /**\n     * ensure that the bounding box is visible\n     * @param {number} x - relative to content's coordinate system\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     */\n    ensureVisible(x, y, width, height)\n    {\n        this.content.ensureVisible(x, y, width, height)\n        this._drawScrollbars()\n    }\n}"],"names":["penner","factory","module","umd","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","Math","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","a","p","s","abs","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","call","this","scrollboxOptions","boxWidth","boxHeight","scrollbarSize","scrollbarBackground","scrollbarBackgroundAlpha","scrollbarForeground","scrollbarForegroundAlpha","dragScroll","stopPropagation","scrollbarOffsetHorizontal","scrollbarOffsetVertical","underflow","fadeScrollbar","fadeScrollbarTime","fadeScrollboxWait","fadeScrollboxEase","passiveWheel","clampWheel","Scrollbox","PIXI.Container","[object Object]","options","super","Object","assign","overflow","overflowX","overflowY","ease","Penner","content","addChild","Viewport","screenWidth","screenHeight","decelerate","on","_drawScrollbars","ticker","pixiNS","PIXI","parseInt","exec","PIXI.VERSION","shared","Ticker","scrollbar","PIXI.Graphics","interactive","scrollbarDown","scrollbarMove","scrollbarUp","_maskContent","update","noTicker","tickerFunction","updateLoop","min","elapsedMS","add","value","disable","_disabled","drag","removePlugin","plugins","remove","contentWidth","isScrollbarVertical","contentHeight","isScrollbarHorizontal","_isScrollbarVertical","_isScrollbarHorizontal","scrollTop","top","scrollLeft","left","scrollWidth","_scrollWidth","width","scrollHeight","_scrollHeight","height","indexOf","clear","right","bottom","scrollbarTop","scrollbarHeight","scrollbarLeft","scrollbarWidth","beginFill","drawRect","endFill","activateFade","mask","_drawMask","direction","clamp","elapsed","fade","wait","duration","alpha","dirty","e","local","toLocal","data","global","y","x","pointerDown","type","last","worldScreenWidth","worldScreenHeight","resize","ensureVisible"],"mappings":"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"}